<!DOCTYPE>
<html>
<head>
  <title>JavaScript Loan Calculator</title>
  <style type="text/css">
    .output{font-weight: bold;}
    #payment{text-decoration:underline;}
    #graph{border:solid black 1px;}
    th, td{vertical-align: top;}
  </style>
</head>
<body>
  <table>
    <tr><th>Enter Loan Data:</th>
      <td></td>
      <th>Loan Balance, Cumulative Equity, and Interest Payments</th>
    </tr>
    <tr><td>Amount of the loan ($):</td>
      <td><input id="amount" onchange="calculate();"></td>
      <td rowspan=8>
        <canvas id="graph" width="400" height="250"></canvas></td></tr>
    <tr><td>Annual interset (%):</td>
      <td><input id="apr" onchange="calculate();"></td></tr>
    <tr><td>Repayment period (years):</td>
      <td><input id="years" onchange="calculate();"></td>
    <tr><td>Zipcode (to find lenders):</td>
      <td><input id="zipcode" onchange="calculate();"></td>
    <tr><th>Approximate Payments:</th>
      <td><button onclick="calculate();">Calculate</button></td></tr>
    <tr><td>Monthly payment:</td>
        <td>$<span class="output" id="payment"></span></td></tr>
    <tr><td>Total interest:</td>
        <td>$<span class="output" id="totalinterest"></span></td></tr>
    <tr><th>Sponsors:</th><td colspan=2>
    	Apply for your loan with one if these fine lenders:
    	<div id="lenders"></div></td></tr>    
  </table>
  <script>
  "use strict"// 开启ECMAScript 5的严格模式
  function calculate() {
  	var amount         = document.getElementById('amount');
  	var apr            = document.getElementById('apr');
  	var year           = document.getElementById('years');
  	var zipcode        = document.getElementById('zipcode');
  	var payment        = document.getElementById('payment');
  	var total          = document.getElementById('total');
  	var totallinterest = document.getElementById('totalinterest');

  	// 假设所有输入合法，获取数据
  	// 将百分比格式转换为小数格式，并从年利率转换为月利率
  	// 将年度赔付转换为月度赔付
  	var principal      = parseFloat(amount.value);
  	var interset       = parseFloat(apr.value); / 100 / 12;
  	var payments       = parseFloat(years.value) * 12;

  	// 现在计算月度赔付的数据
  	var x              = Math.pow(1 + interset, payments);
  	var monthly        = (principal * x * interest) / (x - 1);

  	// 如果结果没有超过范围，且输入正确
  	if (isFinite(monthly)) {
  		// 填充数据，精确到两位小数
  		payment.innerHTML = monthly.toFiexed(2);
  		total.innerHTML   =  
  	} 
  }
  </script>
</body>